<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title></title>

  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-KK94CHFLLe+nY2dmCWGMq91rCGa5gtU4mk92HdvYe+M/SXH301p5ILy+dN9+nJOZ" crossorigin="anonymous">

  <script id="__ada" data-handle="demo-jesserodriguez" src="https://static.ada.support/embed2.js"></script>
</head>

<body>
  <input type="button" onclick=changeUserLog() value="Log In" id="userLoginStatus" style="
        position: fixed;
        top: 70px;
        left: 70px;"></input>
  <script>
    let user_log = false;

    function changeUserLog() {
      if (user_log) {
        user_log = false;
        console.log("user is logged out")
        document.getElementById("userLoginStatus").value = "Log In"
      } else {
        user_log = true;
        console.log("user is logged in")
        document.getElementById("userLoginStatus").value = "Log Out"
      }
      checkLogin()
    }

    function checkLogin() {
      console.log("checkLogin() called")
      if (user_log) {
        name = "Abhiram Pavithran";
        email = "abhiram.pavithran@hotmail.com";
        console.log("user is logged in: " + user_log)
        window.adaEmbed.setMetaFields({
          user_log: user_log,
          name: name,
          email: email
        });
        console.log("user is logged in and user details are set, name: " + name);
      } else {
        user_log = false;
        name = "";
        email = "";
        window.adaEmbed.setMetaFields({
          user_log: user_log,
          name: name,
          email: email
        });
      }
    }
    window.adaSettings = {
      adaReadyCallback: ({
        isRolledOut
      }) => {
        console.log("Ada Embed is done setting up. Chat support is now available.");

        checkLogin();
      }
    }
  </script>

</body>

</html>
