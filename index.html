<html>
<head>

<script>
   !function(o,p,s,e,c){
       var i,a,h,u=[],d=[];function t(){var t="You must provide a supported major version.";try{if(!c)throw new Error(t);var e,n="https://cdn.smooch.io/",r="smooch";if((e="string"==typeof this.response?JSON.parse(this.response):this.response).url){var o=p.getElementsByTagName("script")[0],s=p.createElement("script");s.async=!0;var i=c.match(/([0-9]+)\.?([0-9]+)?\.?([0-9]+)?/),a=i&&i[1];if(i&&i[3])s.src=n+r+"."+c+".min.js";else{if(!(4<=a&&e["v"+a]))throw new Error(t);s.src=e["v"+a]}o.parentNode.insertBefore(s,o)}}catch(e){e.message===t&&console.error(e)}}o[s]={init:function(){i=arguments;var t={then:function(e){return d.push({type:"t",next:e}),t},catch:function(e){return d.push({type:"c",next:e}),t}};return t},on:function(){u.push(arguments)},render:function(){a=arguments},destroy:function(){h=arguments}},o.__onWebMessengerHostReady__=function(e){if(delete o.__onWebMessengerHostReady__,o[s]=e,i)for(var t=e.init.apply(e,i),n=0;n<d.length;n++){var r=d[n];t="t"===r.type?t.then(r.next):t.catch(r.next)}a&&e.render.apply(e,a),h&&e.destroy.apply(e,h);for(n=0;n<u.length;n++)e.on.apply(e,u[n])};var n=new XMLHttpRequest;n.addEventListener("load",t),n.open("GET","https://"+e+".webloader.smooch.io/",!0),n.responseType="json",n.send()
     }(window,document,"Smooch","6390fa9df720290105fd4c23","5");
 </script>

</head>

<body>
<h1>SunCo Web Widget Demo</h1>
<h2>This fiddle is a demo of the SunCo web widget and Ada integration.</h2>

<script>
//Insert second code snippet here:
var botName = "tsetestdemo-jesserodriguez";
var greet = "hello";
Smooch.init({
    //embedded: true,
    integrationId: "6390fa9df720290105fd4c23",
     //Feature Parity Settings
    canUserSeeConversationList: false,
    canUserCreateMoreConversations: false,
    integrationOrder: [],
    notificationChannelPromptEnabled: false,

    //Bot Appearance
    businessName: botName,
  //  businessIconUrl: assetsBotIcon,
    customColors: {
      brandColor: "B7E1E5",
      conversationColor: "F4633A",
      actionColor: "F4633A",
    },

    //Custom Text
    customText: {
      connectNotificationText: "Type a greeting to get started",
    },
    delegate: {
      beforeDisplay(message, data) {
        // Check if the Message has metadata indicating it should be hidden from user
        if (message.metadata && message.metadata.isHidden) {
             return null;
          // return message;
        }

        return message;
      },
    },
  });

  Smooch.on('widget:opened', function () {
    let conversations = Smooch.getConversations();
    if (conversations.length === 0) {
        Smooch.createConversation({
        messages: [
          {
              text: greet,
              type: 'text',
              metadata: {
                isHidden:true
              }
          }
        ]
      }).then(function(conversation) {
            
        })
    }
});

</script>
</body>
